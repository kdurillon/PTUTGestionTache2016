<template name="tacheHome">
    {{setTitle 'Accueil Des Tâches'}}
    <h1 class="text-center" >Accueil des tâches</h1>

    <hr>

    <div class="row text-center">
        <div class="col-sm-3">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Mail</h3>
                </div>
                <div class="panel-body">
                    <a href="{{pathFor route='newTacheMail'}}" class="btn btn-success">Créer</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Note</h3>
                </div>
                <div class="panel-body">
                    <a href="{{pathFor route='newTacheNote'}}" class="btn btn-success">Créer</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Document</h3>
                </div>
                <div class="panel-body">
                    <a href="{{pathFor route='newTacheDocument'}}" class="btn btn-success">Créer</a>
                </div>
            </div>
        </div>
        <div class="col-sm-3">
            <div class="panel panel-primary">
                <div class="panel-heading">
                    <h3 class="panel-title">Panel primary</h3>
                </div>
                <div class="panel-body">
                    Panel content
                </div>
            </div>
        </div>
    </div>

    {{> reactiveTable class="table table-striped table-hover table-bordered text-center" collection=getTache settings=optionsReactiveTable}}

</template>

<template name="actionTableTache">
    {{#if mailExist _id}}
    <button data-toggle="tooltip" title="Envoyer le mail" class="btn btn-xs btn-success mail_tache">
        <span class="glyphicon glyphicon-send"></span>
    </button>
    {{/if}}
    <button data-toggle="tooltip" title="Voir informations" class="btn btn-xs btn-info info_tache">
        <span class="glyphicon glyphicon-info-sign"></span>
    </button>
    <a data-toggle="tooltip" title="Editer la tâche" class="btn btn-xs btn-warning edit_tache" href="tache/{{typeTache}}/edit/{{_id}}">
        <span class="glyphicon glyphicon-pencil"></span>
    </a>
    <button data-toggle="tooltip" title="Supprimer la tâche" class="btn btn-xs btn-danger delete_tache">
        <span class="glyphicon glyphicon-trash"></span>
    </button>
</template>

<template name="modalInfoTache">
    <div class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header text-center">
                    <h4 class="modal-title">{{titre}}</h4>
                </div>

                <div class="modal-body">
                    <ul>
                        <li><b>Type : </b>{{typeTache}}</li>
                        {{#if categorie}}
                            <li>
                                <b>Catégorie : </b>
                                {{categorie}}
                            </li>
                        {{/if}}
                        {{#if emails}}
                            <li>
                                <div class="panel panel-default">
                                    <div class="panel-heading" role="tab" id="headingOne">
                                        <h4 class="panel-title">
                                            <b>
                                                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                                    Destinataires (cliquez pour afficher la liste complète)
                                                </a>
                                            </b>
                                        </h4>
                                    </div>
                                    <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
                                        <div class="panel-body">
                                            <ul>
                                            {{#each emails}}
                                                <li>{{this}}</li>
                                            {{/each}}
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        {{/if}}
                        {{#if contenu}}
                            <li>
                                <b>Contenu : </b>
                                <div class="well">{{{contenu}}}</div>
                            </li>
                        {{/if}}
                        {{#if document}}
                            <li>
                                <b>Image : </b>
                                <img class="img-responsive img-thumbnail" src="/uploads/{{document.userId}}/{{document.file}}" alt="{{document.file}}">
                            </li>
                        {{/if}}
                        {{#if dateCreation}}
                            <li>
                                <b>Date de création : </b>
                                {{dateCreation}}
                            </li>
                        {{/if}}
                         {{#if dateFin}}
                            <li><b>Date de fin/rappel : </b>{{dateFin}}</li>
                         {{/if}}
                    </ul>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
</template>